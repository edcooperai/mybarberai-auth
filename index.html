<!DOCTYPE html>
<html>
<head>
    <title>Auth Redirect</title>
    <script>
        window.onload = function() {
            try {
                const hashParams = new URLSearchParams(window.location.hash.substring(1));
                
                // Get only the essential parameters
                const params = {
                    access_token: hashParams.get('access_token'),
                    token_type: hashParams.get('token_type'),
                    state: hashParams.get('state'),
                    type: 'success'  // Add this to match Expo's expected format
                };
                
                // Build the final URL with all parameters
                const queryString = new URLSearchParams(params).toString();
                const finalUrl = `https://auth.expo.io/@edcooper/mybarberai?${queryString}`;
                
                // Use replace for cleaner redirect
                window.location.replace(finalUrl);
            } catch (error) {
                document.body.innerHTML = `Error: ${error.message}. Please try again.`;
            }
        }
    </script>
</head>
<body>
    <p>Redirecting to app...</p>
</body>
</html>
